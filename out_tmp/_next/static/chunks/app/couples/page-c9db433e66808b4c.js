(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{7395:function(e,s,t){Promise.resolve().then(t.bind(t,5161))},5161:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var r=t(7437),a=t(6095),l=t(4383),n=t(2265),i=t(3879),c=t(7731),d=t(489),o=t(5754),m=t(4599),x=t(5083),u=t(5313),h=t(2706),p=t(5179),f=t(9842),j=t(5509);function y(){let[e,s]=(0,n.useState)([]),[t,l]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),[b,N]=(0,n.useState)(""),[g,w]=(0,n.useState)("6"),{user:C}=(0,a.a)(),{toast:k}=(0,x.pm)(),E=(0,u.useRouter)();(0,n.useEffect)(()=>{S()},[C]);let S=async()=>{if(C)try{let{data:e,error:t}=await m.OQ.from("couples").select("*").eq("user_id",C.id).order("name");if(t)throw t;s(e||[])}catch(e){console.error("Error fetching couples:",e),l(e instanceof Error?e.message:"An unexpected error occurred")}},_=async e=>{if(C)try{let{error:s}=await m.OQ.from("couples").delete().eq("id",e).eq("user_id",C.id);if(s)throw s;k({title:"Couple removed",description:"The couple has been removed from your list."}),S()}catch(e){console.error("Error deleting couple:",e),k({title:"Error",description:"Could not remove the couple. Please try again.",variant:"destructive"})}},z=e=>{var s;v(e),N(e.name),w((null===(s=e.interval_months)||void 0===s?void 0:s.toString())||"6")},Z=async()=>{if(C&&y)try{let{error:e}=await m.OQ.from("couples").update({name:b,interval_months:parseInt(g)}).eq("id",y.id).eq("user_id",C.id);if(e)throw e;k({title:"Couple updated",description:"The couple's information has been updated."}),v(null),S()}catch(e){console.error("Error updating couple:",e),k({title:"Error",description:"Could not update the couple. Please try again.",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"container mx-auto py-4 md:py-8 px-2 md:px-4",children:[(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 shadow-sm border-2",style:{borderColor:"#60432D"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>E.push("/"),className:"hover:bg-black/10",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Couples"})]}),(0,r.jsx)("div",{className:"overflow-x-auto text-xs md:text-sm",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Name"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Interval (months)"}),(0,r.jsx)("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.interval_months||6}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>z(e),children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})}),(0,r.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>_(e.id),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,r.jsx)(h.Vq,{open:!!y,onOpenChange:e=>!e&&v(null),children:(0,r.jsxs)(h.cZ,{children:[(0,r.jsx)(h.fK,{children:(0,r.jsx)(h.$N,{children:"Edit Couple"})}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"name",children:"Name"}),(0,r.jsx)(p.I,{id:"name",value:b,onChange:e=>N(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"interval",children:"Interval (months)"}),(0,r.jsxs)(j.Ph,{value:g,onValueChange:w,children:[(0,r.jsx)(j.i4,{children:(0,r.jsx)(j.ki,{placeholder:"Select interval"})}),(0,r.jsxs)(j.Bw,{children:[(0,r.jsx)(j.Ql,{value:"3",children:"3 months"}),(0,r.jsx)(j.Ql,{value:"6",children:"6 months"}),(0,r.jsx)(j.Ql,{value:"12",children:"12 months"})]})]})]}),(0,r.jsx)(o.z,{onClick:Z,className:"w-full",children:"Save"})]})]})})]})}function v(){let{user:e}=(0,a.a)();return e?(0,r.jsx)(y,{}):(0,r.jsx)(l.B,{})}},4383:function(e,s,t){"use strict";t.d(s,{B:function(){return h}});var r=t(7437),a=t(2265),l=t(6095),n=t(5754),i=t(5179),c=t(9842),d=t(3879),o=t(948),m=t(8814),x=t(8792),u=t(5083);function h(){let[e,s]=(0,a.useState)(""),[t,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),{signIn:N,signUp:g,resetPassword:w}=(0,l.a)(),{toast:C}=(0,u.pm)(),k=async s=>{s.preventDefault(),b(null);try{if(j){await w(e),C({title:"Reset email sent",description:"Check your email for password reset instructions."}),y(!1);return}p?await g(e,t):await N(e,t)}catch(e){b(e instanceof Error?e.message:"An error occurred")}};return j?(0,r.jsx)("div",{className:"flex items-center justify-center p-2 sm:p-4 w-full max-w-md mx-auto",style:{WebkitTextSizeAdjust:"100%"},children:(0,r.jsxs)("div",{className:"w-full space-y-5 bg-white/95 backdrop-blur-sm p-4 sm:p-6 rounded-xl shadow-md border border-[#E9DFCE]",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsxs)("button",{onClick:()=>y(!1),className:"flex items-center text-sm text-[#A18249] hover:text-[#1C160C] transition-colors",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Back to login"]}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-[#019863] rounded-full flex items-center justify-center mb-3",children:(0,r.jsx)(o.Z,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight text-[#1C160C]",children:"Reset Password"}),(0,r.jsx)("p",{className:"text-[#A18249] mt-1 sm:mt-2 text-xs sm:text-sm max-w-sm",children:"Enter your email address and we'll send you instructions to reset your password."})]}),v&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 text-sm p-3 rounded-lg border border-red-200",children:v})]}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"email",className:"text-[#1C160C]",children:"Email address"}),(0,r.jsx)(i.I,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>s(e.target.value),className:"h-10 border-[#E9DFCE] focus:border-[#019863] focus:ring-[#019863] text-base",required:!0,style:{fontSize:16}})]}),(0,r.jsx)(n.z,{type:"submit",className:"w-full h-10 text-base font-medium bg-[#019863] hover:bg-[#018957] text-white rounded-full",children:"Send Reset Instructions"})]})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center p-2 sm:p-4 w-full max-w-md mx-auto",style:{WebkitTextSizeAdjust:"100%"},children:(0,r.jsxs)("div",{className:"w-full space-y-5 bg-white/95 backdrop-blur-sm p-4 sm:p-6 rounded-xl shadow-md border border-[#E9DFCE]",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"h-14 w-14 bg-[#019863] rounded-full flex items-center justify-center mb-3",children:(0,r.jsx)(o.Z,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight text-[#1C160C]",children:"DinnerTracker"}),(0,r.jsx)("p",{className:"text-[#A18249] mt-1 sm:mt-2 text-xs sm:text-sm max-w-sm",children:p?"Create an account to start tracking your dinner dates":"Welcome back! Sign in to continue tracking your dinner dates"})]}),v&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 text-sm p-3 rounded-lg border border-red-200",children:v})]}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c._,{htmlFor:"email",className:"text-[#1C160C] text-sm",children:"Email address"}),(0,r.jsx)(i.I,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>s(e.target.value),className:"h-10 border-[#E9DFCE] focus:border-[#019863] focus:ring-[#019863] text-base",required:!0,style:{fontSize:16}})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c._,{htmlFor:"password",className:"text-[#1C160C] text-sm",children:"Password"}),(0,r.jsx)(i.I,{id:"password",type:"password",placeholder:"Enter your password",value:t,onChange:e=>h(e.target.value),className:"h-10 border-[#E9DFCE] focus:border-[#019863] focus:ring-[#019863] text-base",required:!0,style:{fontSize:16}})]})]}),(0,r.jsx)(n.z,{type:"submit",className:"w-full h-10 text-base font-medium bg-[#019863] hover:bg-[#018957] text-white rounded-full",children:p?"Create Account":"Sign In"})]}),(0,r.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 text-sm text-center",children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(!p),className:"text-[#A18249] text-xs sm:text-sm hover:text-[#1C160C] transition-colors",children:p?"Already have an account? Sign in":"Don't have an account? Sign up"}),!p&&(0,r.jsx)("button",{type:"button",onClick:()=>y(!0),className:"text-[#A18249] text-xs sm:text-sm hover:text-[#1C160C] transition-colors",children:"Forgot your password?"})]}),(0,r.jsx)("div",{className:"border-t border-[#E9DFCE] pt-3",children:(0,r.jsxs)(x.default,{href:"/about",className:"inline-flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-[#A18249] hover:text-[#1C160C] transition-colors",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4"}),"Learn more about Dinner Tracker"]})})]})]})})}},3879:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(843).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7731:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(843).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},489:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(843).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[794,519,933,825,971,69,744],function(){return e(e.s=7395)}),_N_E=e.O()}]);